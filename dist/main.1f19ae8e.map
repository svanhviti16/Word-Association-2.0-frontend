{"version":3,"sources":["main.js"],"names":["window","addEventListener","init","currentLevel","timeOut","score","isPlaying","time","scoreStorage","localStorage","wordInput","document","querySelector","scoreDisplay","scoreText","timeDisplay","message","feedback","seconds","newGame","wordList","wordDict","isValid","getItem","countDown","setInterval","countdown","checkStatus","innerHTML","setItem","showWord","handleInput","matchWords","words","value","fetch","then","response","json","word","mainword","otherwords","console","log","allWords","shuffle","forEach","element","listword","createElement","setAttribute","appendChild","catch","err","e","key","result","isCorrect","is_correct","mostSimilar","most_similar","clearTimeout","style","display","classList","add","reloadGame","className","setTimeout","location","reload","gameOver","finalScore","clear","a","i","length","j","Math","floor","random"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"..","sourcesContent":["/*\n* Word Association game based on word embeddings\n* Uses parcelJS bundler\n* Basic game structure based on Brad Traversy's speed-typing game tutorial: https://www.youtube.com/watch?v=Yw-SYSG-028\n*\n*/\n\nwindow.addEventListener('load', init);\n\nconst currentLevel = 11;\nconst timeOut = 2500;\n\n// Global scope variables\nlet score = 0;\nlet isPlaying;\nlet time = currentLevel;\n\nscoreStorage = window.localStorage;\n\n// DOM elements\nconst wordInput = document.querySelector('#word-input')\nconst scoreDisplay = document.querySelector('#score')\nconst scoreText = document.querySelector('#scoreText')\nconst timeDisplay = document.querySelector('#time')\nconst message = document.querySelector('#message')\nconst feedback = document.querySelector('#feedback')\nconst seconds = document.querySelector('#seconds')\nconst newGame = document.querySelector('#new-game')\nconst wordList = document.querySelector('#word-list')\nvar wordDict = {}\nvar isValid;\n\n// Initialize Game\nfunction init() {\n  // getting user score from local storage (and returns 0 if null)\n  score = scoreStorage.getItem(\"userScore\") || 0;\n  // Decrement time\n  window.countDown = setInterval(countdown, 1000);\n  // Check game status (often)\n  setInterval(checkStatus, 50);\n\n  if (score >= 1) {\n      scoreDisplay.innerHTML = score;\n  }\n  else {\n      score = 0;\n      scoreStorage.setItem(\"userScore\", score);\n      scoreDisplay.innerHTML = \"0\";\n  }\n  // display random word\n  showWord(wordDict);\n  wordInput.addEventListener('input', handleInput);  \n  // check typed words - waiting for user to press enter\n  matchWords(wordDict);\n}\n\n// Start match\nfunction handleInput() {\n  if (matchWords()) {\n    isPlaying = true;\n    time = 10;\n    showWord(words);\n    wordInput.value = '';\n    score++;\n  }\n  scoreDisplay.innerHTML = score;\n}\n\nfunction showWord(wordDict) {\n  fetch('http://localhost:5042/words')\n  .then(function(response) {\n    return response.json();\n  })\n  .then(word => {\n    wordDict[\"mainword\"] = word.mainword;\n    wordDict[\"otherwords\"] = word.otherwords;\n    // contains the count\n    console.log(wordDict)\n    allWords = [word.mainword, ...word.otherwords]\n    allWords = shuffle(allWords);\n    console.log(\"allwords: \" + allWords);\n    allWords.forEach(element => {\n      listword = document.createElement(\"h2\");\n      listword.innerHTML = element;\n      listword.setAttribute(\"id\", element);\n      if (element === word.mainword) {\n        listword.setAttribute(\"class\", \"main-word\")\n      }\n      wordList.appendChild(listword);\n    });\n    return wordDict;\n  }).catch(err => {\n    console.log(\"Error fetching word from server.\")\n  });\n}\n\nfunction matchWords(wordDict) {\n  wordInput.addEventListener('keypress', function (e) {\n    if (e.key === 'Enter') {\n      if (!wordInput.value) {\n        return;\n      }\n      // unexplained HTML error in this line :( Doesn't affect game though\n      fetch(`http://localhost:5042/userword/${wordInput.value}+${wordDict.mainword}+${wordDict.otherwords}`)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(result => {\n        if (wordInput.value != wordDict.mainword) {\n          isCorrect = result.is_correct;\n          mostSimilar = result.most_similar;\n          // correct answer\n          if (isCorrect) {\n            clearTimeout(window.countDown);\n            timeDisplay.style.display = \"none\";\n            wordInput.value = '';\n            score++;\n            scoreStorage.setItem(\"userScore\", score);\n            score = scoreStorage.getItem(\"userScore\");\n            document.querySelector(\".main-word\").classList.add(\"correct\")\n            reloadGame();\n          }\n          // wrong but valid answer\n          else {\n            wordInput.value = '';\n            if (mostSimilar)  {\n              clearTimeout(window.countDown);\n              timeDisplay.style.display = \"none\";\n              document.querySelector(\"#\"+mostSimilar).className=\"purple-text\";\n              reloadGame();\n            }\n          }\n        }\n        // clearing input if the user simply entered the main word\n        wordInput.value = '';\n      })\n    }\n  })\n}\n\nfunction reloadGame() {\n  setTimeout(function() {\n    window.location.reload(true);\n    }, timeOut);\n}\nfunction countdown() {\n  // Make sure time is not run out\n  if (time > 0) {\n    // Decrement\n    time--;\n  } else if (time === 0) {\n    // Game is over\n    isPlaying = false;\n    gameOver();\n    clearTimeout(window.countDown);\n  }\n  // Show time\n  timeDisplay.innerHTML = time;\n}\n\n// Check game status\nfunction checkStatus() {\n  if (!isPlaying && time === 0) {\n    newGame.style.display = \"block\";\n  } else {\n    newGame.style.display = \"none\";\n  }\n}\n\nfunction gameOver() {\n  var finalScore = scoreStorage.getItem(\"userScore\");\n  timeDisplay.style.display = \"none\";\n  scoreDisplay.innerHTML = 'Þú fékkst ' + finalScore;\n  wordInput.style.display = \"none\";\n  scoreStorage.clear();\n  newGame.addEventListener(\"click\", function (e) {\n    window.location.reload(true);\n  })\n}\n\n/**\n * From SO\n * Shuffles array in place. ES6 version\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle(a) {\n  for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}"]}