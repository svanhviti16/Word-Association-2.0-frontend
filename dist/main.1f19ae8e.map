{"version":3,"sources":["main.js"],"names":["window","addEventListener","init","currentLevel","timeOut","score","isPlaying","time","scoreStorage","localStorage","wordInput","document","querySelector","contents","Array","scoreDisplay","scoreText","timeDisplay","message","feedback","seconds","newGame","wordList","wordDict","isValid","getItem","countDown","setInterval","countdown","checkStatus","console","log","innerHTML","setItem","showWord","handleInput","matchWords","words","value","fetch","then","response","json","word","mainword","otherwords","allWords","shuffle","forEach","element","listword","createElement","setAttribute","appendChild","catch","err","e","key","result","isCorrect","is_correct","mostSimilar","most_similar","clearTimeout","style","display","classList","add","reloadGame","className","setTimeout","location","reload","gameOver","finalScore","clear","startWithSameSubstr","mainWord","inputWord","startsWith","substring","a","i","length","j","Math","floor","random"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"..","sourcesContent":["// Basic game structure based on Brad Traversy's speed-typing game tutorial: https://www.youtube.com/watch?v=Yw-SYSG-028\n\nwindow.addEventListener('load', init);\n\nconst currentLevel = 11;\nconst timeOut = 2500;\n\n// Global scope variables\nlet score = 0;\nlet isPlaying;\nlet time = currentLevel;\n\nscoreStorage = window.localStorage;\n\n// DOM elements\nconst wordInput = document.querySelector('#word-input')\nvar contents = new Array()\nconst scoreDisplay = document.querySelector('#score')\nconst scoreText = document.querySelector('#scoreText')\nconst timeDisplay = document.querySelector('#time')\nconst message = document.querySelector('#message')\nconst feedback = document.querySelector('#feedback')\nconst seconds = document.querySelector('#seconds')\nconst newGame = document.querySelector('#new-game')\nconst wordList = document.querySelector('#word-list')\nvar wordDict = {}\nvar isValid;\n\n// Initialize Game\nfunction init() {\n  // getting user score from local storage\n  score = scoreStorage.getItem(\"userScore\") || 0;\n  // Decrement time\n  window.countDown = setInterval(countdown, 1000);\n  // Check game status (often)\n  setInterval(checkStatus, 50);\n  // Show number of seconds\n  console.log(currentLevel)\n  //seconds.innerHTML = currentLevel;\n  \n  if (score >= 1) {\n      scoreDisplay.innerHTML = score;\n  }\n  else {\n      score = 0;\n      scoreStorage.setItem(\"userScore\", score);\n      scoreDisplay.innerHTML = \"0\";\n  }\n  // display random word\n  showWord(wordDict);\n  wordInput.addEventListener('input', handleInput);\n  // Call countdown every second\n  \n  // check typed words - waiting for user to press enter\n  matchWords(wordDict);\n  \n}\n\n// Start match\nfunction handleInput() {\n  if (matchWords()) {\n    isPlaying = true;\n    time = 10;\n    showWord(words);\n    wordInput.value = '';\n    score++;\n  }\n  scoreDisplay.innerHTML = score;\n}\n// match word to skyldheiti\n// random index word\nfunction showWord(wordDict) {\n  fetch('http://localhost:5042/words')\n  .then(function(response) {\n    return response.json();\n  })\n  .then(word => {\n    console.log(\"mainword: \" + word.mainword);\n    console.log(\"oword: \" + word.otherwords);\n\n    wordDict[\"mainword\"] = word.mainword;\n    wordDict[\"otherwords\"] = word.otherwords;\n    // contains the count\n    console.log(wordDict)\n    allWords = [word.mainword, ...word.otherwords]\n    allWords = shuffle(allWords);\n    console.log(\"allwords: \" + allWords);\n    allWords.forEach(element => {\n      listword = document.createElement(\"h2\");\n      listword.innerHTML = element;\n      listword.setAttribute(\"id\", element);\n\n      if (element === word.mainword) {\n        listword.setAttribute(\"class\", \"main-word\")\n      }\n      wordList.appendChild(listword);\n    });\n    return wordDict;\n  }).catch(err => {\n    console.log(\"Error fetching word from server.\")\n  });\n}\n\nfunction matchWords(wordDict) {\n  wordInput.addEventListener('keypress', function (e) {\n    if (e.key === 'Enter') {\n      if (!wordInput.value) {\n        return;\n      }\n      //if (startWithSameSubstr(wordDict.mainword, wordInput.value)) {\n      //}\n      fetch(`http://localhost:5042/userword/${wordInput.value}+${wordDict.mainword}+${wordDict.otherwords}`)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(result => {\n        isCorrect = result.is_correct;\n        mostSimilar = result.most_similar;\n        if (isCorrect) {\n          clearTimeout(window.countDown);\n          timeDisplay.style.display = \"none\";\n          wordInput.value = '';\n          score++;\n          scoreStorage.setItem(\"userScore\", score);\n          score = scoreStorage.getItem(\"userScore\");\n          \n          document.querySelector(\".main-word\").classList.add(\"correct\")\n          //feedback.className=\"green-text\";\n          //feedback.innerHTML = \"Já, tölvan er sammála þér!\";\n          reloadGame();\n        }\n        else {\n          wordInput.value = '';\n          for (word in result.otherwords)\n            console.log(\"orð \" + word)\n          if (mostSimilar) {\n            clearTimeout(window.countDown);\n            timeDisplay.style.display = \"none\";\n            document.querySelector(\"#\"+mostSimilar).className=\"purple-text\";\n            reloadGame();\n          }\n          //feedback.innerHTML = 'Tölvan segir að þetta orð passi betur við ' + mostSimilar;\n        }\n      })\n    }\n  })\n}\n\nfunction reloadGame() {\n  setTimeout(function() {\n    //feedback.innerHTML = \"\";\n    window.location.reload(true);\n    }, timeOut);\n}\nfunction countdown() {\n  // Make sure time is not run out\n  if (time > 0) {\n    // Decrement\n    time--;\n  } else if (time === 0) {\n    // Game is over\n    isPlaying = false;\n    gameOver();\n    clearTimeout(window.countDown);\n  }\n  // Show time\n  timeDisplay.innerHTML = time;\n}\n\n// Check game status\nfunction checkStatus() {\n  if (!isPlaying && time === 0) {\n    newGame.style.display = \"block\";\n  } else {\n    newGame.style.display = \"none\";\n  }\n}\n\nfunction gameOver() {\n  var finalScore = scoreStorage.getItem(\"userScore\");\n  timeDisplay.innerHTML = '';\n  scoreDisplay.innerHTML = 'Þú fékkst ' + finalScore;\n  wordInput.style.display = \"none\";\n  scoreStorage.clear();\n  newGame.addEventListener(\"click\", function (e) {\n    window.location.reload(true);\n  })\n}\n\nfunction startWithSameSubstr(mainWord, inputWord) {\n  if (mainWord.startsWith(inputWord.substring(0, 4))) {\n    console.log(\"substring found: \" + inputWord.substring(0, 4))\n    return true;\n  }\n}\n/**\n * From SO\n * Shuffles array in place. ES6 version\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle(a) {\n  for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}"]}